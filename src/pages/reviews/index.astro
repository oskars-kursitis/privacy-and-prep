---
import Base from "../../layouts/BaseLayout.astro";

const modules = import.meta.glob("./*.mdx", { eager: true });
const entries = Object.entries(modules)
  .map(([p, m]) => {
    const slug = p.replace("./", "").replace(".mdx", "");
    // @ts-ignore
    const fm = (m as any).frontmatter ?? {};
    return { slug, title: fm.title ?? slug.replace(/-/g, " "), description: fm.description ?? "" };
  })
  .sort((a, b) => a.title.localeCompare(b.title));
---

<Base title="Reviews" description="No fluff, just whether it works and who should buy it.">
  <h1 class="text-2xl font-bold mb-4">Reviews</h1>
  {entries.length === 0 ? (
    <p>Reviews coming soon.</p>
  ) : (
    <div class="grid gap-4 md:grid-cols-2">
      {entries.map((r) => (
        <a href={`/reviews/${r.slug}/`} class="no-underline">
          <div class="border rounded-xl p-4 hover:shadow-sm transition">
            <div class="font-semibold">{r.title}</div>
            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">{r.description}</p>
          </div>
        </a>
      ))}
    </div>
  )}
</Base>
